{% extends 'base.html' %} {% block content %}
<div
  class="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-6 flex flex-col max-w-3xl mx-auto"
>
  <!-- Back Button -->
  <div>
    <a
      href="{{ url_for('dashboard') }}"
      class="inline-flex items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-600 font-semibold mb-6 transition-colors duration-300"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5 mr-1"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M15 19l-7-7 7-7"
        />
      </svg>
      Back
    </a>
  </div>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %}
  <div class="mb-6">
    {% for category, message in messages %}
    <div
      class="p-4 rounded mb-2 text-white {% if category == 'success' %}bg-green-600{% else %}bg-red-600{% endif %}"
    >
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %} {% endwith %}

  <!-- Container -->
  <div class="bg-white dark:bg-gray-800 shadow-lg rounded-lg p-8 space-y-8">
    <!-- Profile Section -->
    <section
      id="profile"
      class="bg-gray-100 dark:bg-gray-800 rounded-lg p-6 shadow-md max-w-md mx-auto"
    >
      <h2
        class="text-2xl font-semibold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"
      >
        Profile
      </h2>
      <div class="flex items-center space-x-4 mb-4">
        <div
          class="w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-bold"
        >
          {{ (current_user.username[0] if current_user.username) | default('U')
          }}
        </div>
        <div class="flex flex-col">
          <span class="text-lg font-medium text-gray-900 dark:text-gray-100">
            {{ current_user.username if current_user.username else 'Name not
            set' }}
          </span>
          <span class="text-sm text-gray-600 dark:text-gray-400">
            {{ current_user.email }}
          </span>
        </div>
      </div>
      <a
        href="{{ url_for('profile') }}"
        class="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-md transition duration-300"
      >
        View Full Profile
      </a>
    </section>

    

    <!-- Feedback Section -->
    <section id="feedback" class="space-y-4">
      <button
        id="toggleFeedbackBtn"
        class="w-full text-left text-xl font-semibold bg-gray-200 dark:bg-gray-700 rounded px-4 py-3 hover:bg-gray-300 dark:hover:bg-gray-600 transition duration-300 flex justify-between items-center"
      >
        Return Feedback
        <svg
          id="feedbackArrow"
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 transform transition-transform duration-300 {% if open_form == 'feedback' %}rotate-180{% endif %}"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 9l-7 7-7-7"
          />
        </svg>
      </button>
      <form
        id="feedbackForm"
        method="POST"
        action="{{ url_for('submit_feedback') }}"
        class="space-y-4 bg-gray-50 dark:bg-gray-900 p-6 rounded shadow-inner {% if open_form != 'feedback' %}hidden{% endif %}"
      >
        <div>
          <label for="name" class="block mb-1 font-medium">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            value="{{ form_data.name if form_data else '' }}"
            required
            class="w-full p-2 border border-gray-300 rounded"
          />
          {% if errors and errors.name %}
          <p class="text-red-600 text-sm mt-1">{{ errors.name }}</p>
          {% endif %}
        </div>

        <div>
          <label for="message" class="block mb-1 font-medium">Message</label>
          <textarea
            id="message"
            name="message"
            required
            rows="4"
            class="w-full p-2 border border-gray-300 rounded"
          >
{{ form_data.message if form_data else '' }}</textarea
          >
          {% if errors and errors.message %}
          <p class="text-red-600 text-sm mt-1">{{ errors.message }}</p>
          {% endif %}
        </div>

        <button
          type="submit"
          class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded"
        >
          Submit Feedback
        </button>
      </form>
    </section>

    <!-- About App Section -->
    <section id="aboutApp" class="space-y-4">
      <h2
        class="text-2xl font-bold border-b border-gray-300 dark:border-gray-700 pb-2"
      >
        About the App
      </h2>
      <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
        This UPSC Preparation App is designed to provide aspirants with
        comprehensive tools and resources for their journey, including current
        affairs, interview guidance, previous year questions, detailed
        application form assistance, and more. The app is built with modern
        technologies ensuring a smooth, user-friendly experience across all
        devices.
      </p>
      <p class="text-gray-600 dark:text-gray-400 italic text-sm">
        Version: 1.0.0 &nbsp;&nbsp;|&nbsp;&nbsp; Developed by Yashasvi Choudhary
        , Diksha Patil & Shivani Bhallavi
      </p>
    </section>
  </div>
</div>

<!-- Toggle Script -->
<script>
 

  // Toggle Feedback form
  const toggleFeedbackBtn = document.getElementById("toggleFeedbackBtn");
  const feedbackForm = document.getElementById("feedbackForm");
  const feedbackArrow = document.getElementById("feedbackArrow");

  toggleFeedbackBtn.addEventListener("click", () => {
    if (feedbackForm.classList.contains("hidden")) {
      feedbackForm.classList.remove("hidden");
      feedbackArrow.classList.add("rotate-180");
    } else {
      feedbackForm.classList.add("hidden");
      feedbackArrow.classList.remove("rotate-180");
    }
  });
</script>
{% endblock %}
