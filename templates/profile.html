{% extends 'base.html' %} {% block content %}
<div class="flex justify-center mt-36 gap-4 items-start px-4 ">
  <!-- Back Button -->
  <a
    href="/dashboard"
    class="w-12 h-12 bg-white text-blue-600 hover:bg-blue-200 rounded-full flex items-center justify-center shadow transition-colors mt-2"
    title="Back"
  >
    <i class="fas fa-arrow-left"></i>
  </a>

  <!-- Profile Container -->
  <div
    class="max-w-xl w-full p-8 bg-white shadow-xl rounded-2xl border border-gray-200"
  >
    <h2 class="text-3xl font-bold mb-6 text-gray-800 border-b pb-2">Profile</h2>

    <!-- Profile Form -->
    <form
      id="profile-form"
      action="{{ url_for('update_profile') }}"
      method="POST"
      class="space-y-6"
    >
      <!-- Username -->
      <div>
        <label
          for="username-input"
          class="block text-gray-700 font-semibold mb-1"
          >Username</label
        >
        <input
          type="text"
          name="new_username"
          id="username-input"
          value="{{ current_user.username }}"
          class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 transition"
          disabled
        />
      </div>

      <!-- Email -->
      <div>
        <label for="email-input" class="block text-gray-700 font-semibold mb-1"
          >Email</label
        >
        <input
          type="email"
          name="new_email"
          id="email-input"
          value="{{ current_user.email }}"
          class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-400 transition"
          disabled
        />
      </div>
    </form>

    <!-- Buttons container: flex for buttons aligned horizontally -->
    <div class="flex gap-4 mt-6">
      <!-- Edit / Update Buttons inside the profile form -->
      <form
        id="profile-update-form"
        action="{{ url_for('update_profile') }}"
        method="POST"
        class="flex gap-4"
      >
        <button
          type="button"
          id="edit-btn"
          class="bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition font-semibold"
        >
          Edit
        </button>
        <button
          type="submit"
          id="update-btn"
          class="bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition font-semibold hidden"
        >
          Update
        </button>
      </form>

      <!-- Logout Button in separate form -->
      <form
        action="{{ url_for('logout') }}"
        method="POST"
        class="flex-shrink-0"
      >
        <button
          type="submit"
          class="bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 transition font-semibold"
        >
          Logout
        </button>
      </form>
    </div>
  </div>
</div>

<!-- JavaScript -->
<script>
  const editBtn = document.getElementById("edit-btn");
  const updateBtn = document.getElementById("update-btn");
  const usernameInput = document.getElementById("username-input");
  const emailInput = document.getElementById("email-input");

  editBtn.addEventListener("click", () => {
    usernameInput.disabled = false;
    emailInput.disabled = false;
    usernameInput.classList.remove("bg-gray-100");
    emailInput.classList.remove("bg-gray-100");

    updateBtn.classList.remove("hidden");
    editBtn.classList.add("hidden");

    usernameInput.focus();
    usernameInput.select();
  });
</script>
{% endblock %}
