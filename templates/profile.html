{% extends 'base.html' %} {% block content %}
<div class="flex justify-center mt-10 gap-4 items-start">
  <!-- Back Button -->
  <a
    href="/dashboard"
    class="w-12 h-12 bg-white text-blue-600 hover:bg-blue-200 rounded-full flex items-center justify-center shadow transition-colors mt-2"
    title="Back"
  >
    <i class="fas fa-arrow-left"></i>
  </a>

  <!-- Profile Container -->
  <div class="max-w-xl w-full p-6 bg-white shadow-xl rounded-2xl">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">Profile</h2>

    <!-- Profile Form -->
    <form
      id="profile-form"
      action="{{ url_for('update_profile') }}"
      method="POST"
    >
      <!-- Username -->
      <div class="mb-4">
        <label class="block text-gray-700">Username</label>
        <input
          type="text"
          name="new_username"
          id="username-input"
          value="{{ current_user.username }}"
          class="w-full p-2 border border-gray-300 rounded-lg mt-1 bg-gray-100"
          disabled
        />
      </div>

      <!-- Email -->
      <div class="mb-4">
        <label class="block text-gray-700">Email</label>
        <input
          type="email"
          name="new_email"
          id="email-input"
          value="{{ current_user.email }}"
          class="w-full p-2 border border-gray-300 rounded-lg mt-1 bg-gray-100"
          disabled
        />
      </div>

      <!-- Buttons Row: Edit/Update + Logout -->
      <div class="flex justify-between items-center mt-6">
        <!-- Edit / Update -->
        <div class="flex gap-4">
          <button
            type="button"
            id="edit-btn"
            class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
          >
            Edit
          </button>
          <button
            type="submit"
            id="update-btn"
            class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 hidden"
          >
            Update
          </button>
        </div>

        <!-- Logout -->
        <form action="{{ url_for('logout') }}" method="POST">
          <button
            type="submit"
            class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600"
          >
            Logout
          </button>
        </form>
      </div>
    </form>
  </div>
</div>

<!-- JavaScript for Toggle -->
<script>
  const editBtn = document.getElementById("edit-btn");
  const updateBtn = document.getElementById("update-btn");
  const usernameInput = document.getElementById("username-input");
  const emailInput = document.getElementById("email-input");

  editBtn.addEventListener("click", () => {
    usernameInput.disabled = false;
    emailInput.disabled = false;
    usernameInput.classList.remove("bg-gray-100");
    emailInput.classList.remove("bg-gray-100");

    updateBtn.classList.remove("hidden");
    editBtn.classList.add("hidden");

    usernameInput.focus();
    usernameInput.select();
  });
</script>
{% endblock %}
